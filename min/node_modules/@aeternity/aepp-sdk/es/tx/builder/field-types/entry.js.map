{"version":3,"file":"entry.js","names":["decode","encode","Encoding","genEntryField","tag","serialize","txParams","packEntry","ArrayBuffer","isView","_Buffer","from","startsWith","deserialize","buf","unpackEntry","Bytearray"],"sources":["../../../../src/tx/builder/field-types/entry.ts"],"sourcesContent":["import { decode, encode, Encoded, Encoding } from '../../../utils/encoder.js';\nimport { EntryTag } from '../entry/constants.js';\nimport type { unpackEntry as unpackEntryType, packEntry as packEntryType } from '../entry/index.js';\n\nexport default function genEntryField<T extends EntryTag = EntryTag>(\n  tag?: T,\n): {\n  serialize: (\n    // TODO: replace with `TxParams & { tag: T }`,\n    //  but fix TS2502 value is referenced directly or indirectly in its own type annotation\n    value: any,\n    options: { packEntry: typeof packEntryType },\n  ) => Buffer;\n  deserialize: (\n    value: Buffer,\n    options: { unpackEntry: typeof unpackEntryType },\n    // TODO: replace with `TxUnpacked & { tag: T }`,\n    //  TS2577 Return type annotation circularly references itself\n  ) => any;\n} {\n  return {\n    serialize(txParams, { packEntry }) {\n      if (ArrayBuffer.isView(txParams)) return Buffer.from(txParams as any);\n      if (typeof txParams === 'string' && txParams.startsWith('tx_')) {\n        return decode(txParams as Encoded.Transaction);\n      }\n      return decode(packEntry({ ...txParams, ...(tag != null && { tag }) }));\n    },\n\n    deserialize(buf, { unpackEntry }) {\n      return unpackEntry(encode(buf, Encoding.Bytearray), tag);\n    },\n  };\n}\n"],"mappings":";AAAA,SAASA,MAAM,EAAEC,MAAM,EAAWC,QAAQ,QAAQ,2BAA2B;AAI7E,eAAe,SAASC,aAAaA,CACnCC,GAAO,EAcP;EACA,OAAO;IACLC,SAASA,CAACC,QAAQ,EAAE;MAAEC;IAAU,CAAC,EAAE;MACjC,IAAIC,WAAW,CAACC,MAAM,CAACH,QAAQ,CAAC,EAAE,OAAOI,OAAA,CAAOC,IAAI,CAACL,QAAe,CAAC;MACrE,IAAI,OAAOA,QAAQ,KAAK,QAAQ,IAAIA,QAAQ,CAACM,UAAU,CAAC,KAAK,CAAC,EAAE;QAC9D,OAAOZ,MAAM,CAACM,QAA+B,CAAC;MAChD;MACA,OAAON,MAAM,CAACO,SAAS,CAAC;QAAE,GAAGD,QAAQ;QAAE,IAAIF,GAAG,IAAI,IAAI,IAAI;UAAEA;QAAI,CAAC;MAAE,CAAC,CAAC,CAAC;IACxE,CAAC;IAEDS,WAAWA,CAACC,GAAG,EAAE;MAAEC;IAAY,CAAC,EAAE;MAChC,OAAOA,WAAW,CAACd,MAAM,CAACa,GAAG,EAAEZ,QAAQ,CAACc,SAAS,CAAC,EAAEZ,GAAG,CAAC;IAC1D;EACF,CAAC;AACH","ignoreList":[]}