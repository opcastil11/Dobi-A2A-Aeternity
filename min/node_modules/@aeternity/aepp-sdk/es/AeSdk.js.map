{"version":3,"file":"AeSdk.js","names":["AeSdkBase","decode","UnavailableAccountError","AeSdk","constructor","accounts","options","_defineProperty","forEach","account","idx","addAccount","select","_resolveAccount","selectedAddress","address","addresses","Object","keys","selectAccount","removeAccount"],"sources":["../src/AeSdk.ts"],"sourcesContent":["import AeSdkBase from './AeSdkBase.js';\nimport { OnAccount } from './AeSdkMethods.js';\nimport AccountBase from './account/Base.js';\nimport { decode, Encoded } from './utils/encoder.js';\nimport { UnavailableAccountError } from './utils/errors.js';\n\nexport default class AeSdk extends AeSdkBase {\n  accounts: { [key: Encoded.AccountAddress]: AccountBase } = {};\n\n  selectedAddress?: Encoded.AccountAddress;\n\n  /**\n   * @param options - Options\n   */\n  constructor({\n    accounts,\n    ...options\n  }: { accounts?: AccountBase[] } & ConstructorParameters<typeof AeSdkBase>[0] = {}) {\n    super(options);\n    accounts?.forEach((account, idx) => this.addAccount(account, { select: idx === 0 }));\n  }\n\n  override _resolveAccount(account: OnAccount = this.selectedAddress): AccountBase {\n    if (typeof account === 'string') {\n      const address = account as Encoded.AccountAddress;\n      decode(address);\n      if (this.accounts[address] == null) throw new UnavailableAccountError(account);\n      account = this.accounts[address];\n    }\n    return super._resolveAccount(account);\n  }\n\n  /**\n   * Get accounts addresses\n   * @example addresses()\n   */\n  override addresses(): Encoded.AccountAddress[] {\n    return Object.keys(this.accounts) as Encoded.AccountAddress[];\n  }\n\n  /**\n   * Add specific account\n   * @param account - Account instance\n   * @param options - Options\n   * @param options.select - Select account\n   * @example addAccount(account)\n   */\n  addAccount(account: AccountBase, { select }: { select?: boolean } = {}): void {\n    const { address } = account;\n    this.accounts[address] = account;\n    if (select === true) this.selectAccount(address);\n  }\n\n  /**\n   * Remove specific account\n   * @param address - Address of account to remove\n   * @example removeAccount(address)\n   */\n  removeAccount(address: Encoded.AccountAddress): void {\n    if (this.accounts[address] == null) throw new UnavailableAccountError(address);\n    delete this.accounts[address]; // eslint-disable-line @typescript-eslint/no-dynamic-delete\n    if (this.selectedAddress === address) delete this.selectedAddress;\n  }\n\n  /**\n   * Select specific account\n   * @param address - Address of account to select\n   * @example selectAccount('ak_xxxxxxxx')\n   */\n  selectAccount(address: Encoded.AccountAddress): void {\n    decode(address);\n    if (this.accounts[address] == null) throw new UnavailableAccountError(address);\n    this.selectedAddress = address;\n  }\n}\n"],"mappings":";AAAA,OAAOA,SAAS,MAAM,gBAAgB;AAGtC,SAASC,MAAM,QAAiB,oBAAoB;AACpD,SAASC,uBAAuB,QAAQ,mBAAmB;AAE3D,eAAe,MAAMC,KAAK,SAASH,SAAS,CAAC;EAK3C;AACF;AACA;EACEI,WAAWA,CAAC;IACVC,QAAQ;IACR,GAAGC;EACsE,CAAC,GAAG,CAAC,CAAC,EAAE;IACjF,KAAK,CAACA,OAAO,CAAC;IAACC,eAAA,mBAX0C,CAAC,CAAC;IAY3DF,QAAQ,EAAEG,OAAO,CAAC,CAACC,OAAO,EAAEC,GAAG,KAAK,IAAI,CAACC,UAAU,CAACF,OAAO,EAAE;MAAEG,MAAM,EAAEF,GAAG,KAAK;IAAE,CAAC,CAAC,CAAC;EACtF;EAESG,eAAeA,CAACJ,OAAkB,GAAG,IAAI,CAACK,eAAe,EAAe;IAC/E,IAAI,OAAOL,OAAO,KAAK,QAAQ,EAAE;MAC/B,MAAMM,OAAO,GAAGN,OAAiC;MACjDR,MAAM,CAACc,OAAO,CAAC;MACf,IAAI,IAAI,CAACV,QAAQ,CAACU,OAAO,CAAC,IAAI,IAAI,EAAE,MAAM,IAAIb,uBAAuB,CAACO,OAAO,CAAC;MAC9EA,OAAO,GAAG,IAAI,CAACJ,QAAQ,CAACU,OAAO,CAAC;IAClC;IACA,OAAO,KAAK,CAACF,eAAe,CAACJ,OAAO,CAAC;EACvC;;EAEA;AACF;AACA;AACA;EACWO,SAASA,CAAA,EAA6B;IAC7C,OAAOC,MAAM,CAACC,IAAI,CAAC,IAAI,CAACb,QAAQ,CAAC;EACnC;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEM,UAAUA,CAACF,OAAoB,EAAE;IAAEG;EAA6B,CAAC,GAAG,CAAC,CAAC,EAAQ;IAC5E,MAAM;MAAEG;IAAQ,CAAC,GAAGN,OAAO;IAC3B,IAAI,CAACJ,QAAQ,CAACU,OAAO,CAAC,GAAGN,OAAO;IAChC,IAAIG,MAAM,KAAK,IAAI,EAAE,IAAI,CAACO,aAAa,CAACJ,OAAO,CAAC;EAClD;;EAEA;AACF;AACA;AACA;AACA;EACEK,aAAaA,CAACL,OAA+B,EAAQ;IACnD,IAAI,IAAI,CAACV,QAAQ,CAACU,OAAO,CAAC,IAAI,IAAI,EAAE,MAAM,IAAIb,uBAAuB,CAACa,OAAO,CAAC;IAC9E,OAAO,IAAI,CAACV,QAAQ,CAACU,OAAO,CAAC,CAAC,CAAC;IAC/B,IAAI,IAAI,CAACD,eAAe,KAAKC,OAAO,EAAE,OAAO,IAAI,CAACD,eAAe;EACnE;;EAEA;AACF;AACA;AACA;AACA;EACEK,aAAaA,CAACJ,OAA+B,EAAQ;IACnDd,MAAM,CAACc,OAAO,CAAC;IACf,IAAI,IAAI,CAACV,QAAQ,CAACU,OAAO,CAAC,IAAI,IAAI,EAAE,MAAM,IAAIb,uBAAuB,CAACa,OAAO,CAAC;IAC9E,IAAI,CAACD,eAAe,GAAGC,OAAO;EAChC;AACF","ignoreList":[]}