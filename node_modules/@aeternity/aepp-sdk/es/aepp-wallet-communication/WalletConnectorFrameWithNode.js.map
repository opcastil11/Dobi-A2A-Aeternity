{"version":3,"file":"WalletConnectorFrameWithNode.js","names":["RpcConnectionError","Node","WalletConnectorFrameBase","_node","WeakMap","WalletConnectorFrameWithNode","constructor","args","_classPrivateFieldInitSpec","node","_classPrivateFieldGet","_updateNetwork","params","url","_classPrivateFieldSet","emit","connect","name","connection","connector","_connect"],"sources":["../../src/aepp-wallet-communication/WalletConnectorFrameWithNode.ts"],"sourcesContent":["import { Network } from './rpc/types.js';\nimport { RpcConnectionError } from '../utils/errors.js';\nimport Node from '../Node.js';\nimport BrowserConnection from './connection/Browser.js';\nimport WalletConnectorFrameBase from './WalletConnectorFrameBase.js';\n\ninterface EventsWithNode {\n  nodeChange: (node: Node) => void;\n}\n\n/**\n * Connect to wallet as iframe/web-extension, asks wallet to provide node url\n * In comparison with WalletConnectorFrame, this would work better for decentralized applications\n * @category aepp wallet communication\n */\nexport default class WalletConnectorFrameWithNode extends WalletConnectorFrameBase<EventsWithNode> {\n  #node: Node = null as unknown as Node;\n\n  /**\n   * The node instance provided by wallet\n   */\n  get node(): Node {\n    return this.#node;\n  }\n\n  protected override _updateNetwork(params: Network): void {\n    if (params.node?.url == null) throw new RpcConnectionError('Missing URLs of the Node');\n    this.#node = new Node(params.node.url);\n    this.emit('nodeChange', this.#node);\n  }\n\n  /**\n   * Connect to wallet\n   * @param name - Aepp name\n   * @param connection - Wallet connection object\n   */\n  static async connect(\n    name: string,\n    connection: BrowserConnection,\n  ): Promise<WalletConnectorFrameWithNode> {\n    const connector = new WalletConnectorFrameWithNode();\n    await super._connect(name, connection, connector, true);\n    return connector;\n  }\n}\n"],"mappings":";;;;;AACA,SAASA,kBAAkB,QAAQ,oBAAoB;AACvD,OAAOC,IAAI,MAAM,YAAY;AAE7B,OAAOC,wBAAwB,MAAM,+BAA+B;AAAC,IAAAC,KAAA,oBAAAC,OAAA;AAMrE;AACA;AACA;AACA;AACA;AACA,eAAe,MAAMC,4BAA4B,SAASH,wBAAwB,CAAiB;EAAAI,YAAA,GAAAC,IAAA;IAAA,SAAAA,IAAA;IACjGC,0BAAA,OAAAL,KAAK,EAAS,IAAI;EAAoB;EAEtC;AACF;AACA;EACE,IAAIM,IAAIA,CAAA,EAAS;IACf,OAAOC,qBAAA,CAAKP,KAAK,EAAV,IAAS,CAAC;EACnB;EAEmBQ,cAAcA,CAACC,MAAe,EAAQ;IACvD,IAAIA,MAAM,CAACH,IAAI,EAAEI,GAAG,IAAI,IAAI,EAAE,MAAM,IAAIb,kBAAkB,CAAC,0BAA0B,CAAC;IACtFc,qBAAA,CAAKX,KAAK,EAAV,IAAI,EAAS,IAAIF,IAAI,CAACW,MAAM,CAACH,IAAI,CAACI,GAAG,CAA5B,CAAC;IACV,IAAI,CAACE,IAAI,CAAC,YAAY,EAAEL,qBAAA,CAAKP,KAAK,EAAV,IAAS,CAAC,CAAC;EACrC;;EAEA;AACF;AACA;AACA;AACA;EACE,aAAaa,OAAOA,CAClBC,IAAY,EACZC,UAA6B,EACU;IACvC,MAAMC,SAAS,GAAG,IAAId,4BAA4B,CAAC,CAAC;IACpD,MAAM,KAAK,CAACe,QAAQ,CAACH,IAAI,EAAEC,UAAU,EAAEC,SAAS,EAAE,IAAI,CAAC;IACvD,OAAOA,SAAS;EAClB;AACF","ignoreList":[]}