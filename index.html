<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dobi Protocol - IoT Aeternity Interface</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/forms.css">
    <link rel="stylesheet" href="styles/responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Button gradient overrides (paste after your CSS links) -->
    <style>
      :root{
        --btn-radius: 14px;
        --btn-border: 1px solid rgba(255,255,255,.14);
        --btn-inner: inset 0 1px 0 rgba(255,255,255,.18);
      }

      /* Base */
      .btn{
        border-radius: var(--btn-radius) !important;
        border: var(--btn-border);
        color: #fff !important;
        background-size: 200% 200%;
        transition: transform .15s ease, box-shadow .2s ease, filter .2s ease, background-position .25s ease;
        box-shadow: var(--btn-inner);
      }
      .btn.btn-large{ padding: 14px 22px; font-weight: 600; }

      /* PRIMARIO: teal (como el de la imagen 2) */
      .btn-primary{
        background-image: linear-gradient(135deg, #0AF1D8 0%, #09E3C5 35%, #06C2FF 100%) !important;
        box-shadow:
          0 10px 24px rgba(0,255,208,.18),
          0 2px 6px rgba(0,0,0,.25),
          var(--btn-inner);
      }
      .btn-primary:hover{
        transform: translateY(-1px);
        filter: brightness(1.06);
        background-position: 0% 60%;
        box-shadow:
          0 14px 30px rgba(0,255,208,.22),
          0 4px 10px rgba(0,0,0,.28),
          var(--btn-inner);
      }
      .btn-primary:active{ transform: translateY(0); filter: brightness(.98); }

      /* SECONDARY: purple (like the one in image 2) */
      .btn-secondary{
        background-image: linear-gradient(135deg, #9B7BFF 0%, #8666FF 40%, #B995FF 100%) !important;
        border: 1px solid rgba(155,123,255,.35);
        box-shadow:
          0 10px 24px rgba(155,123,255,.18),
          var(--btn-inner);
      }
      .btn-secondary:hover{
        transform: translateY(-1px);
        filter: brightness(1.06);
        background-position: 0% 60%;
        box-shadow:
          0 14px 30px rgba(155,123,255,.25),
          0 4px 10px rgba(0,0,0,.28),
          var(--btn-inner);
      }

      /* Small */
      .btn.btn-sm{ padding: 8px 12px; font-size: 13px; }

      /* Active nav pill (optional, style from image 2) */
      .nav-btn.active, .nav-btn:focus-visible{
        background-image: linear-gradient(135deg, #0AF1D8 0%, #06C2FF 100%) !important;
        color: #0b1020 !important;
        border: var(--btn-border);
        box-shadow: 0 6px 16px rgba(0,255,208,.16), var(--btn-inner);
      }

      /* Connect wallet uses primary */
      #connect-wallet.btn{
        background-image: linear-gradient(135deg, #0AF1D8 0%, #06C2FF 100%) !important;
      }
    </style>
    
    <!-- Aeternity SDK -->
    <script src="https://unpkg.com/@aeternity/aepp-sdk@14.1.0/dist/aepp-sdk.browser-script.cjs"></script>
    <script src="https://unpkg.com/@aeternity/aepp-wallet-connector/dist/aepp-wallet-connector.min.js"></script>
</head>
<body>
    <!-- Tech particles -->
    <div class="tech-particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="images/dobi-logo2.png" alt="Dobi Protocol Logo" class="nav-logo">
                <span class="gradient-text">Dobi</span>
            </div>
            <div class="nav-menu">
                <button class="nav-btn" id="nav-home">Home</button>
                <button class="nav-btn" id="nav-devices">Devices</button>
                <button class="nav-btn" id="nav-transactions">Transactions</button>
            </div>
            <div class="nav-auth">
                <button class="btn btn-primary" id="connect-wallet">
                    <i class="fas fa-wallet"></i>
                    <span id="wallet-text">Connect Wallet</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Home Page -->
        <div id="home-page" class="page active">
            <!-- Hero Section -->
            <section class="hero">
                <div class="hero-content">
                    <h1 class="hero-title">Welcome to <span class="gradient-text">Dobi</span></h1>
                    <p class="hero-subtitle">Connect your EV Charger to Aeternity blockchain with ease</p>
                    <div class="hero-buttons">
                        <button class="btn btn-primary btn-large" id="hero-create-btn">
                            <i class="fas fa-plus"></i>
                            Create New Dobi Device
                        </button>
                        <button class="btn btn-secondary btn-large" id="hero-devices-btn">
                            <i class="fas fa-list"></i>
                            View All Devices
                        </button>
                    </div>
                </div>
            </section>

            <!-- Stats Section -->
            <section class="stats">
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-cube"></i>
                        <h3>Total Devices</h3>
                        <p id="total-devices">0</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-network-wired"></i>
                        <h3>Active Connections</h3>
                        <p id="active-connections">0</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-coins"></i>
                        <h3>Total Transactions</h3>
                        <p id="total-transactions">247</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-wallet"></i>
                        <h3>Wallet Balance</h3>
                        <p id="wallet-balance">0 AE</p>
                    </div>
                </div>
            </section>

            <!-- Recent Assets Section -->
            <section class="recent-section">
                <h2>Recent Devices</h2>
                <div id="recent-devices" class="devices-grid">
                    <!-- Recent devices will be loaded here -->
                </div>
                <div class="recent-actions">
                    <button class="btn btn-primary" id="recent-create-btn">
                        <i class="fas fa-plus"></i>
                        Create Device
                    </button>
                </div>
            </section>
        </div>

        <!-- Devices Page -->
        <div id="devices-page" class="page">
            <div class="page-header">
                <h2>All Devices</h2>
                <button class="btn btn-primary" id="devices-create-btn">
                    <i class="fas fa-plus"></i>
                    Create New Device
                </button>
            </div>
            <div id="devices-list" class="devices-grid">
                <!-- All devices will be loaded here -->
            </div>
        </div>

        <!-- Create Device Page -->
        <div id="create-page" class="page">
            <div class="page-header">
                <button class="btn btn-secondary" id="create-back-btn">
                    <i class="fas fa-arrow-left"></i>
                    Back
                </button>
                <h2>Create New Dobi Device</h2>
            </div>
            <form id="create-device-form" class="device-form">
                <!-- Initial 3 fields -->
                <div class="form-group">
                    <label for="device-id">Device ID</label>
                    <input type="text" id="device-id" name="device_id" placeholder="Device_001" required>
                    <div class="error-message"></div>
                    <div class="success-message"></div>
                    <div class="pending-message"></div>
                </div>
                <div class="form-group">
                    <label for="device-name">Device Name</label>
                    <input type="text" id="device-name" name="name" placeholder="My IoT Device" required>
                    <div class="error-message"></div>
                    <div class="success-message"></div>
                    <div class="pending-message"></div>
                </div>
                <div class="form-group">
                    <label for="device-type">Device Type</label>
                    <div class="device-type-selector">
                        <button type="button" class="device-type-btn" data-type="sensor">
                            <i class="fas fa-thermometer-half"></i>
                            <span>Sensor</span>
                        </button>
                        <button type="button" class="device-type-btn" data-type="actuator">
                            <i class="fas fa-cog"></i>
                            <span>Actuator</span>
                        </button>
                        <button type="button" class="device-type-btn" data-type="gateway">
                            <i class="fas fa-wifi"></i>
                            <span>Gateway</span>
                        </button>
                        <button type="button" class="device-type-btn" data-type="ev_charger">
                            <i class="fas fa-charging-station"></i>
                            <span>EV Charger</span>
                        </button>
                    </div>
                    <div class="error-message"></div>
                    <div class="success-message"></div>
                    <div class="pending-message"></div>
                </div>

                <!-- Additional fields (hidden initially) -->
                <div id="additional-fields" class="additional-fields">
                    <div class="form-group">
                        <label for="device-description">Description</label>
                        <textarea id="device-description" name="description" rows="3" placeholder="IoT device for monitoring and control" required></textarea>
                        <div class="error-message"></div>
                        <div class="success-message"></div>
                        <div class="pending-message"></div>
                    </div>
                    
                    <!-- EV Charger specific fields -->
                    <div id="ev-charger-fields" class="ev-charger-fields" style="display: none;">
                        <div class="form-group">
                            <label for="charger-capacity">Charger Capacity (kW)</label>
                            <input type="number" id="charger-capacity" name="charger_capacity" placeholder="50" min="1" max="350">
                            <div class="error-message"></div>
                            <div class="success-message"></div>
                            <div class="pending-message"></div>
                        </div>
                        <div class="form-group">
                            <label for="charger-type">Charger Type</label>
                            <select id="charger-type" name="charger_type">
                                <option value="level1">Level 1 (120V)</option>
                                <option value="level2">Level 2 (240V)</option>
                                <option value="dc_fast">DC Fast Charging</option>
                            </select>
                            <div class="error-message"></div>
                            <div class="success-message"></div>
                            <div class="pending-message"></div>
                        </div>
                        <div class="form-group">
                            <label for="price-per-kwh">Price per kWh (AE)</label>
                            <input type="number" id="price-per-kwh" name="price_per_kwh" placeholder="0.12" step="0.01" min="0.01">
                            <div class="error-message"></div>
                            <div class="success-message"></div>
                            <div class="pending-message"></div>
                        </div>
                        <div class="form-group">
                            <label for="initial-balance">Initial Balance (aettos)</label>
                            <input type="number" id="initial-balance" name="initial_balance" placeholder="10000" min="0">
                            <div class="error-message"></div>
                            <div class="success-message"></div>
                            <div class="pending-message"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="device-location">Location</label>
                        <input type="text" id="device-location" name="location" placeholder="123 Main Street, Downtown" required>
                        <div class="error-message"></div>
                        <div class="success-message"></div>
                        <div class="pending-message"></div>
                    </div>
                    <div class="form-group">
                        <label for="device-status">Status</label>
                        <select id="device-status" name="status">
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                            <option value="maintenance">Maintenance</option>
                        </select>
                        <div class="error-message"></div>
                        <div class="success-message"></div>
                        <div class="pending-message"></div>
                    </div>
                    <div class="form-group">
                        <label for="device-data-url">Data URL (Optional)</label>
                        <input type="url" id="device-data-url" name="data_url" placeholder="https://api.example.com/data">
                        <div class="error-message"></div>
                        <div class="success-message"></div>
                        <div class="pending-message"></div>
                    </div>
                    <div class="form-group">
                        <label for="device-control-url">Control URL (Optional)</label>
                        <input type="url" id="device-control-url" name="control_url" placeholder="https://api.example.com/control">
                        <div class="error-message"></div>
                        <div class="success-message"></div>
                        <div class="pending-message"></div>
                    </div>
                    <div class="form-group">
                        <label for="device-log-url">Log URL (Optional)</label>
                        <input type="url" id="device-log-url" name="log_url" placeholder="https://api.example.com/logs">
                        <div class="error-message"></div>
                        <div class="success-message"></div>
                        <div class="pending-message"></div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary btn-create-device" disabled>
                        <i class="fas fa-save"></i>
                        Create Device
                    </button>
                </div>
            </form>
        </div>

        <!-- Transactions Page -->
        <div id="transactions-page" class="page">
            <div class="page-header">
                <button class="btn btn-secondary" id="transactions-back-btn">
                    <i class="fas fa-arrow-left"></i>
                    Back
                </button>
                <h2>Recent Transactions</h2>
            </div>
            <div id="transactions-list" class="transactions-list">
                <!-- Recent Transactions -->
                <div class="transaction-item">
                    <div class="transaction-icon">
                        <i class="fas fa-charging-station"></i>
                    </div>
                    <div class="transaction-details">
                        <div class="transaction-title">EV Charging Session</div>
                        <div class="transaction-description">Session #8472 - Green Energy Co.</div>
                        <div class="transaction-time">2 minutes ago</div>
                    </div>
                    <div class="transaction-amount positive">
                        +0.156 AE
                    </div>
                </div>

                <div class="transaction-item">
                    <div class="transaction-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="transaction-details">
                        <div class="transaction-title">Charger Funding</div>
                        <div class="transaction-description">Added funds to ST-002</div>
                        <div class="transaction-time">15 minutes ago</div>
                    </div>
                    <div class="transaction-amount positive">
                        +5.000 AE
                    </div>
                </div>

                <div class="transaction-item">
                    <div class="transaction-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="transaction-details">
                        <div class="transaction-title">Electricity Payment</div>
                        <div class="transaction-description">Payment to Solar Power Ltd.</div>
                        <div class="transaction-time">1 hour ago</div>
                    </div>
                    <div class="transaction-amount negative">
                        -0.089 AE
                    </div>
                </div>

                <div class="transaction-item">
                    <div class="transaction-icon">
                        <i class="fas fa-charging-station"></i>
                    </div>
                    <div class="transaction-details">
                        <div class="transaction-title">EV Charging Session</div>
                        <div class="transaction-description">Session #8471 - Wind Energy Inc.</div>
                        <div class="transaction-time">2 hours ago</div>
                    </div>
                    <div class="transaction-amount positive">
                        +0.234 AE
                    </div>
                </div>

                <div class="transaction-item">
                    <div class="transaction-icon">
                        <i class="fas fa-wallet"></i>
                    </div>
                    <div class="transaction-details">
                        <div class="transaction-title">Wallet Top-up</div>
                        <div class="transaction-description">Added AE to wallet</div>
                        <div class="transaction-time">3 hours ago</div>
                    </div>
                    <div class="transaction-amount positive">
                        +10.000 AE
                    </div>
                </div>

                <div class="transaction-item">
                    <div class="transaction-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="transaction-details">
                        <div class="transaction-title">Electricity Payment</div>
                        <div class="transaction-description">Payment to Green Energy Co.</div>
                        <div class="transaction-time">4 hours ago</div>
                    </div>
                    <div class="transaction-amount negative">
                        -0.156 AE
                    </div>
                </div>

                <div class="transaction-item">
                    <div class="transaction-icon">
                        <i class="fas fa-charging-station"></i>
                    </div>
                    <div class="transaction-details">
                        <div class="transaction-title">EV Charging Session</div>
                        <div class="transaction-description">Session #8470 - Solar Power Ltd.</div>
                        <div class="transaction-time">5 hours ago</div>
                    </div>
                    <div class="transaction-amount positive">
                        +0.198 AE
                    </div>
                </div>

                <div class="transaction-item">
                    <div class="transaction-icon">
                        <i class="fas fa-cog"></i>
                    </div>
                    <div class="transaction-details">
                        <div class="transaction-title">Device Registration</div>
                        <div class="transaction-description">Registered new EV Charger</div>
                        <div class="transaction-time">1 day ago</div>
                    </div>
                    <div class="transaction-amount neutral">
                        0.000 AE
                    </div>
                </div>
            </div>
            <div class="load-more">
                <button class="btn btn-secondary" id="load-more-transactions">
                    <i class="fas fa-sync"></i>
                    Load More
                </button>
            </div>
        </div>

        <!-- Device Detail Page -->
        <div id="device-detail-page" class="page">
            <div class="page-header">
                <button class="btn btn-secondary" id="device-detail-back-btn">
                    <i class="fas fa-arrow-left"></i>
                    Back
                </button>
                <h2 id="device-detail-title">Device Details</h2>
            </div>
            
            <div class="device-detail-content">
                <!-- Device Summary Section -->
                <div class="device-summary-section">
                    <div class="section-header">
                        <h3><i class="fas fa-info-circle"></i> Device Summary</h3>
                    </div>
                    <div class="device-summary-card">
                        <h4><i class="fas fa-info-circle"></i> Basic Information</h4>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <label>Device ID</label>
                                <span id="summary-device-id">-</span>
                            </div>
                            <div class="summary-item">
                                <label>Status</label>
                                <span id="summary-status" class="status-badge">-</span>
                            </div>
                            <div class="summary-item">
                                <label>Location</label>
                                <span id="summary-location">-</span>
                            </div>
                            <div class="summary-item">
                                <label>Owner Address</label>
                                <span id="summary-owner" class="address-text">-</span>
                            </div>
                            <div class="summary-item">
                                <label>Type</label>
                                <span id="summary-type">-</span>
                            </div>
                            <div class="summary-item">
                                <label>Description</label>
                                <span id="summary-description">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Device URLs Information -->
                    <div class="device-summary-card">
                        <h4><i class="fas fa-link"></i> Device URLs</h4>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <label>Data URL</label>
                                <span id="summary-data-url" class="url-text">-</span>
                            </div>
                            <div class="summary-item">
                                <label>Control URL</label>
                                <span id="summary-control-url" class="url-text">-</span>
                            </div>
                            <div class="summary-item">
                                <label>Log URL</label>
                                <span id="summary-log-url" class="url-text">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Blockchain Information -->
                    <div class="summary-subsection">
                        <h4><i class="fas fa-link"></i> Blockchain</h4>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <label>Wallet Balance (AE)</label>
                                <span id="summary-wallet-ae">-</span>
                            </div>
                            <div class="summary-item">
                                <label>Network</label>
                                <span id="summary-network">Aeternity Testnet</span>
                            </div>
                            <div class="summary-item">
                                <label>Contract Address</label>
                                <span id="summary-contract-address" class="address-text">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Device Data Section -->
                    <div class="summary-subsection">
                        <h4><i class="fas fa-chart-line"></i> Device Data</h4>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <label>Last Update</label>
                                <span id="summary-last-update">-</span>
                            </div>
                            <div class="summary-item">
                                <label>Data Points</label>
                                <span id="summary-data-points">-</span>
                            </div>
                            <div class="summary-item">
                                <label>Uptime</label>
                                <span id="summary-uptime">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Payments Stream -->
                    <div class="summary-subsection">
                        <div class="section-header">
                            <h3><i class="fas fa-receipt"></i> Payments Stream</h3>
                            <div class="hint">Incoming/outgoing payments for this station </div>
                        </div>

                        <div class="payments-toolbar" style="display:flex; gap:12px; align-items:center; margin-bottom:12px;">
                            <button class="btn btn-sm btn-secondary" id="btn-pause-payments"><i class="fas fa-pause"></i> Pause</button>
                            <button class="btn btn-sm btn-secondary" id="btn-resume-payments"><i class="fas fa-play"></i> Resume</button>
                            <span id="payments-status" style="font-size:12px; opacity:.8;">live</span>
                        </div>

                        <div id="payments-feed" class="logs-list" style="max-height:260px; overflow:auto; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:8px;">
                            <!-- payment items will render here -->
                        </div>
                    </div>

                    <!-- EV Charger Management (only for EV Charger devices) -->
                    <div id="ev-charger-management" class="summary-subsection" style="display: none;">
                        <div class="section-header">
                            <h3><i class="fas fa-charging-station"></i> EV Charger Management</h3>
                            <div class="hint">Manage charging sessions and monitor blockchain payments</div>
                        </div>
                        
                        <!-- Charger Stats -->
                        <div class="device-summary-card">
                            <div class="summary-grid">
                                <div class="summary-item">
                                    <label>Charger Balance</label>
                                    <span id="charger-balance">Loading...</span>
                                </div>
                                <div class="summary-item">
                                    <label>Current Session</label>
                                    <span id="current-session">None</span>
                                </div>
                                <div class="summary-item">
                                    <label>Total kWh Consumed</label>
                                    <span id="total-kwh-consumed">0</span>
                                </div>
                                <div class="summary-item">
                                    <label>Total Revenue</label>
                                    <span id="total-revenue">0 AE</span>
                                </div>
                            </div>
                            
                            <div class="form-actions" style="margin-top: 12px;">
                                <button class="btn btn-primary" onclick="fundCharger()">
                                    <i class="fas fa-coins"></i> Fund Charger (1000 aettos)
                                </button>
                                <button class="btn btn-secondary" onclick="window.open('./operator.html', '_blank')">
                                    <i class="fas fa-chart-line"></i> View Charger Details
                                </button>
                            </div>
                        </div>

                        <!-- Electricity Providers -->
                        <div class="device-summary-card">
                            <h4><i class="fas fa-bolt"></i> Electricity Providers</h4>
                            <div id="providers-list" class="providers-container">
                                <div class="provider-btn w-full bg-blue-100 hover:bg-blue-200 rounded-lg p-3 mb-2 text-left transition-colors cursor-pointer" onclick="startChargingSession('PROVIDER_1')">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <p class="font-bold text-blue-800">Green Energy Co.</p>
                                            <p class="text-sm text-blue-600">0.12 AE/kWh</p>
                                        </div>
                                        <i class="fas fa-arrow-right text-blue-600"></i>
                                    </div>
                                </div>
                                <div class="provider-btn w-full bg-green-100 hover:bg-green-200 rounded-lg p-3 mb-2 text-left transition-colors cursor-pointer" onclick="startChargingSession('PROVIDER_2')">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <p class="font-bold text-green-800">Solar Power Ltd.</p>
                                            <p class="text-sm text-green-600">0.15 AE/kWh</p>
                                        </div>
                                        <i class="fas fa-arrow-right text-green-600"></i>
                                    </div>
                                </div>
                                <div class="provider-btn w-full bg-purple-100 hover:bg-purple-200 rounded-lg p-3 mb-2 text-left transition-colors cursor-pointer" onclick="startChargingSession('PROVIDER_3')">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <p class="font-bold text-purple-800">Wind Energy Inc.</p>
                                            <p class="text-sm text-purple-600">0.10 AE/kWh</p>
                                        </div>
                                        <i class="fas fa-arrow-right text-purple-600"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Active Consumption Session -->
                        <div id="active-consumption" class="device-summary-card" style="display: none;">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h4><i class="fas fa-bolt"></i> Active Charging Session</h4>
                                    <p class="text-sm text-gray-600" id="active-provider">Provider</p>
                                </div>
                                <div class="bg-blue-100 rounded-lg px-4 py-2">
                                    <p class="text-xs text-blue-600">Session</p>
                                    <p class="text-lg font-bold text-blue-800" id="active-session-id">#0</p>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 rounded-xl p-4 mb-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <p class="text-sm text-gray-600">kWh Used</p>
                                        <p class="text-2xl font-bold text-green-600" id="active-kwh">0</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-600">Total Cost</p>
                                        <p class="text-2xl font-bold text-blue-600" id="active-cost">0</p>
                                    </div>
                                </div>
                                <div class="mt-3 pt-3 border-t border-gray-200">
                                    <p class="text-sm text-gray-600">Rate: <span id="active-rate" class="font-bold">0</span> aettos/kWh</p>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 rounded-xl p-3 mb-4 text-sm">
                                <p class="font-bold mb-1">Blockchain Status</p>
                                <p class="text-gray-600">Updates every 15 seconds</p>
                                <p class="text-xs text-gray-500 mt-2">
                                    Elapsed: <span id="elapsed-time">0 seconds</span>
                                </p>
                            </div>
                            
                            <button onclick="stopChargingSession()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-xl">
                                <i class="fas fa-stop"></i> Stop & Finalize Session
                            </button>
                        </div>

                        <!-- No Active Session -->
                        <div id="no-active-session" class="device-summary-card text-center">
                            <div class="text-gray-300 mb-4 text-6xl">⚡</div>
                            <h4 class="text-xl font-bold text-gray-800 mb-2">No Active Session</h4>
                            <p class="text-gray-600">Select a provider to start charging</p>
                        </div>

                        <!-- Blockchain Events -->
                        <div class="device-summary-card">
                            <h4><i class="fas fa-link"></i> Blockchain Events</h4>
                            <div id="blockchain-events" class="blockchain-events-container">
                                <p class="text-gray-500 text-center py-4 text-sm">No transactions yet</p>
                            </div>
                        </div>
                    </div>

                    <!-- EV Charger Management (only for EV Charger devices) -->
                    <div id="ev-charger-management" class="summary-subsection" style="display: none;">
                        <div class="section-header">
                            <h3><i class="fas fa-charging-station"></i> EV Charger Management</h3>
                            <div class="hint">Manage charging sessions and monitor blockchain payments</div>
                        </div>
                        
                        <!-- Charger Stats -->
                        <div class="device-summary-card">
                            <div class="summary-grid">
                                <div class="summary-item">
                                    <label>Charger Balance</label>
                                    <span id="charger-balance">Loading...</span>
                                </div>
                                <div class="summary-item">
                                    <label>Current Session</label>
                                    <span id="current-session">None</span>
                                </div>
                                <div class="summary-item">
                                    <label>Total kWh Consumed</label>
                                    <span id="total-kwh-consumed">0</span>
                                </div>
                                <div class="summary-item">
                                    <label>Total Revenue</label>
                                    <span id="total-revenue">0 AE</span>
                                </div>
                            </div>
                            
                            <div class="form-actions" style="margin-top: 12px;">
                                <button class="btn btn-primary" onclick="fundCharger()">
                                    <i class="fas fa-coins"></i> Fund Charger (1000 aettos)
                                </button>
                                <button class="btn btn-secondary" onclick="window.open('./min/operator.html', '_blank')">
                                    <i class="fas fa-chart-line"></i> View Charger Details
                                </button>
                            </div>
                        </div>

                        <!-- Electricity Providers -->
                        <div class="device-summary-card">
                            <h4><i class="fas fa-bolt"></i> Electricity Providers</h4>
                            <div id="providers-list" class="providers-container">
                                <div class="provider-btn w-full bg-blue-100 hover:bg-blue-200 rounded-lg p-3 mb-2 text-left transition-colors cursor-pointer" onclick="startChargingSession('PROVIDER_1')">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <p class="font-bold text-blue-800">Green Energy Co.</p>
                                            <p class="text-sm text-blue-600">0.12 AE/kWh</p>
                                        </div>
                                        <i class="fas fa-arrow-right text-blue-600"></i>
                                    </div>
                                </div>
                                <div class="provider-btn w-full bg-green-100 hover:bg-green-200 rounded-lg p-3 mb-2 text-left transition-colors cursor-pointer" onclick="startChargingSession('PROVIDER_2')">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <p class="font-bold text-green-800">Solar Power Ltd.</p>
                                            <p class="text-sm text-green-600">0.15 AE/kWh</p>
                                        </div>
                                        <i class="fas fa-arrow-right text-green-600"></i>
                                    </div>
                                </div>
                                <div class="provider-btn w-full bg-purple-100 hover:bg-purple-200 rounded-lg p-3 mb-2 text-left transition-colors cursor-pointer" onclick="startChargingSession('PROVIDER_3')">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <p class="font-bold text-purple-800">Wind Energy Inc.</p>
                                            <p class="text-sm text-purple-600">0.10 AE/kWh</p>
                                        </div>
                                        <i class="fas fa-arrow-right text-purple-600"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Active Consumption Session -->
                        <div id="active-consumption" class="device-summary-card" style="display: none;">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h4><i class="fas fa-bolt"></i> Active Charging Session</h4>
                                    <p class="text-sm text-gray-600" id="active-provider">Provider</p>
                                </div>
                                <div class="bg-blue-100 rounded-lg px-4 py-2">
                                    <p class="text-xs text-blue-600">Session</p>
                                    <p class="text-lg font-bold text-blue-800" id="active-session-id">#0</p>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 rounded-xl p-4 mb-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <p class="text-sm text-gray-600">kWh Used</p>
                                        <p class="text-2xl font-bold text-green-600" id="active-kwh">0</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-600">Total Cost</p>
                                        <p class="text-2xl font-bold text-blue-600" id="active-cost">0</p>
                                    </div>
                                </div>
                                <div class="mt-3 pt-3 border-t border-gray-200">
                                    <p class="text-sm text-gray-600">Rate: <span id="active-rate" class="font-bold">0</span> aettos/kWh</p>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 rounded-xl p-3 mb-4 text-sm">
                                <p class="font-bold mb-1">Blockchain Status</p>
                                <p class="text-gray-600">Updates every 15 seconds</p>
                                <p class="text-xs text-gray-500 mt-2">
                                    Elapsed: <span id="elapsed-time">0 seconds</span>
                                </p>
                            </div>
                            
                            <button onclick="stopChargingSession()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-xl">
                                <i class="fas fa-stop"></i> Stop & Finalize Session
                            </button>
                        </div>

                        <!-- No Active Session -->
                        <div id="no-active-session" class="device-summary-card text-center">
                            <div class="text-gray-300 mb-4 text-6xl">⚡</div>
                            <h4 class="text-xl font-bold text-gray-800 mb-2">No Active Session</h4>
                            <p class="text-gray-600">Select a provider to start charging</p>
                        </div>

                        <!-- Blockchain Events -->
                        <div class="device-summary-card">
                            <h4><i class="fas fa-link"></i> Blockchain Events</h4>
                            <div id="blockchain-events" class="blockchain-events-container">
                                <p class="text-gray-500 text-center py-4 text-sm">No transactions yet</p>
                            </div>
                        </div>
                    </div>

                    <!-- Agent Session (Auto) -->
                    <div class="summary-subsection">
                        <div class="section-header">
                            <h3><i class="fas fa-robot"></i> Agent Session (Auto)</h3>
                            <div class="hint">The charger orchestrates the session and settles the payment automatically</div>
                        </div>

                        <div class="device-summary-card">
                            <div class="summary-grid">
                                <div class="summary-item">
                                    <label>Target kWh</label>
                                    <input id="agent-kwh" type="number" min="1" step="1" value="12" />
                                </div>
                                <div class="summary-item">
                                    <label>Rate (AE/kWh)</label>
                                    <input id="agent-tariff" type="number" min="0.01" step="0.01" value="0.12" />
                                </div>
                                <div class="summary-item">
                                    <label>Utility Address (AE)</label>
                                    <input id="agent-utility" type="text" placeholder="ak_utility_address..." />
                                </div>
                                <div class="summary-item">
                                    <label>Estimated total (AE)</label>
                                    <span id="agent-total">1.44</span>
                                </div>
                                <div class="summary-item">
                                    <label>Agent</label>
                                    <div style="display:flex; gap:10px; align-items:center;">
                                        <input id="agent-toggle" type="checkbox" checked />
                                        <span>Auto settlement ON</span>
                                    </div>
                                </div>
                                <div class="summary-item">
                                    <label>Status</label>
                                    <span id="agent-status">idle</span>
                                </div>
                            </div>

                            <!-- Session progress -->
                            <div style="margin-top:14px;">
                                <div id="agent-progress-wrap" style="background:rgba(255,255,255,.08); height:10px; border-radius:999px; overflow:hidden;">
                                    <div id="agent-progress-bar" style="height:10px; width:0%; background:linear-gradient(90deg,#00E5FF,#7C4DFF);"></div>
                                </div>
                                <div id="agent-progress-text" style="font-size:12px; opacity:.8; margin-top:6px;">0%</div>
                            </div>

                            <div class="form-actions" style="margin-top:12px; display:flex; gap:8px;">
                                <button class="btn btn-secondary" id="agent-arrival"><i class="fas fa-car"></i> Simulate vehicle arrival</button>
                                <button class="btn btn-secondary" id="agent-fund"><i class="fas fa-coins"></i> Fund 5 AE</button>
                                <button class="btn btn-secondary" id="agent-reset"><i class="fas fa-rotate-left"></i> Reset</button>
                            </div>

                            <!-- Session events -->
                            <div style="margin-top:14px;">
                                <h4 style="margin:0 0 8px 0;"><i class="fas fa-stream"></i> Session Events</h4>
                                <div id="session-events" class="logs-list" style="max-height:160px; overflow:auto; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:8px;">
                                    <!-- events -->
                                </div>
                            </div>

                            <!-- History -->
                            <div style="margin-top:14px;">
                                <h4 style="margin:0 0 8px 0;"><i class="fas fa-clock-rotate-left"></i> Session History</h4>
                                <div id="session-history" class="logs-list" style="max-height:160px; overflow:auto; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:8px;">
                                    <!-- history rows -->
                                </div>
                            </div>

                            <p style="font-size:12px; opacity:.75; margin-top:8px;">
                                Note: Automatic payment settlement between Station and Utility providers.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Device Logs Section -->
                <div class="device-logs-section">
                    <div class="section-header">
                        <h3><i class="fas fa-list-alt"></i> Device Logs</h3>
                        <button class="btn btn-sm btn-primary" id="refresh-device-logs">
                            <i class="fas fa-sync"></i>
                            Refresh
                        </button>
                    </div>
                    <div class="device-logs-container">
                        <div id="device-logs-list" class="logs-list">
                            <!-- Device Logs -->
                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:32:18</div>
                                <div class="log-level info">INFO</div>
                                <div class="log-message">EV Charger ST-002: Charging session started - Session #8472</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:31:45</div>
                                <div class="log-level success">SUCCESS</div>
                                <div class="log-message">Device ST-002: Successfully connected to Green Energy Co. provider</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:30:12</div>
                                <div class="log-level info">INFO</div>
                                <div class="log-message">IoT Gateway: Received vehicle detection signal from proximity sensor</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:28:33</div>
                                <div class="log-level warning">WARNING</div>
                                <div class="log-message">Device ST-001: Low battery level detected (15% remaining)</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:25:07</div>
                                <div class="log-level success">SUCCESS</div>
                                <div class="log-message">Blockchain: Payment transaction confirmed - 0.156 AE to Green Energy Co.</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:22:41</div>
                                <div class="log-level info">INFO</div>
                                <div class="log-message">EV Charger ST-002: Consumption reading updated - 2.34 kWh consumed</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:20:15</div>
                                <div class="log-level error">ERROR</div>
                                <div class="log-message">Device ST-003: Communication timeout with MQTT broker</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:18:29</div>
                                <div class="log-level info">INFO</div>
                                <div class="log-message">Oracle: Verified consumption reading for session #8471</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:15:52</div>
                                <div class="log-level success">SUCCESS</div>
                                <div class="log-message">Device ST-002: Successfully funded with 5.000 AE</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:12:18</div>
                                <div class="log-level info">INFO</div>
                                <div class="log-message">EV Charger ST-001: Charging session completed - Total: 8.45 kWh</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:10:33</div>
                                <div class="log-level warning">WARNING</div>
                                <div class="log-message">Network: High latency detected (245ms) - Switching to backup connection</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:08:47</div>
                                <div class="log-level success">SUCCESS</div>
                                <div class="log-message">Blockchain: Smart contract interaction completed - Session #8470 closed</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:05:21</div>
                                <div class="log-level info">INFO</div>
                                <div class="log-message">Device ST-002: Temperature sensor reading - 42°C (normal range)</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 14:02:14</div>
                                <div class="log-level success">SUCCESS</div>
                                <div class="log-message">Device ST-001: Successfully reconnected to network after maintenance</div>
                            </div>

                            <div class="log-entry">
                                <div class="log-timestamp">2024-01-15 13:58:36</div>
                                <div class="log-level info">INFO</div>
                                <div class="log-message">System: Daily maintenance routine completed - All devices operational</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dobi Bot Interface Section -->
                <div class="dobi-bot-section">
                    <div class="section-header">
                        <div class="dobi-header">
                            <img src="images/dobi-logo2.png" alt="Dobi Logo" class="dobi-logo-small">
                            <h3>Dobi Assistant</h3>
                        </div>
                    </div>
                    <div class="bot-interface">
                        <div class="bot-messages" id="bot-messages">
                            <div class="bot-message">
                                <div class="bot-avatar">
                                    <img src="images/dobi-logo2.png" alt="Dobi Logo" class="bot-avatar-img">
                                </div>
                                <div class="message-content">
                                    <p>Hello! I'm Dobi, your IoT device assistant. How can I help you today?</p>
                                </div>
                            </div>
                        </div>
                        <div class="bot-input-container">
                            <input type="text" id="bot-input" placeholder="Ask Dobi anything about this device..." />
                            <button class="btn btn-primary" id="send-bot-message">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Spinner -->
    <div id="loading-spinner" class="loading-spinner hidden">
        <div class="spinner"></div>
        <p>Loading...</p>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>


    <!-- Scripts -->
    <script src="js/ev-charger.js"></script>
    <script type="module" src="js/app.js"></script>
    
    <!-- EV Charger Functions -->
    <script>
        // EV Charger functionality
        let chargingSession = null;
        let updateInterval = null;
        let chargerData = {
            balance: 50000,
            totalKwhConsumed: 1250,
            totalRevenue: 150.75
        };

        // Provider data
        const electricityProviders = {
            'PROVIDER_1': { name: 'Green Energy Co.', price: 0.12, color: 'blue' },
            'PROVIDER_2': { name: 'Solar Power Ltd.', price: 0.15, color: 'green' },
            'PROVIDER_3': { name: 'Wind Energy Inc.', price: 0.10, color: 'purple' }
        };

        // Start charging session
        function startChargingSession(providerId) {
            if (chargingSession) {
                showToast('Session already active. Stop current session first.', 'warning');
                return;
            }

            const provider = electricityProviders[providerId];
            if (!provider) return;

            // Create charging session
            chargingSession = {
                id: Math.floor(Math.random() * 10000),
                provider: provider,
                providerId: providerId,
                startTime: Date.now(),
                kwhUsed: 0,
                totalCost: 0,
                status: 'active'
            };

            // Update UI
            showActiveSession();
            startMonitoring();
            
            // Add blockchain event
            addBlockchainEvent('Session Started', `Session #${chargingSession.id} with ${provider.name}`, 'success');
            
            showToast(`Charging session started with ${provider.name}`, 'success');
        }

        // Show active session UI
        function showActiveSession() {
            const activeConsumption = document.getElementById('active-consumption');
            const noActiveSession = document.getElementById('no-active-session');
            
            if (activeConsumption) activeConsumption.style.display = 'block';
            if (noActiveSession) noActiveSession.style.display = 'none';
            
            if (chargingSession) {
                const activeProvider = document.getElementById('active-provider');
                const activeSessionId = document.getElementById('active-session-id');
                
                if (activeProvider) activeProvider.textContent = chargingSession.provider.name;
                if (activeSessionId) activeSessionId.textContent = `#${chargingSession.id}`;
            }
        }

        // Hide active session UI
        function hideActiveSession() {
            const activeConsumption = document.getElementById('active-consumption');
            const noActiveSession = document.getElementById('no-active-session');
            
            if (activeConsumption) activeConsumption.style.display = 'none';
            if (noActiveSession) noActiveSession.style.display = 'block';
        }

        // Start monitoring
        function startMonitoring() {
            if (updateInterval) {
                clearInterval(updateInterval);
            }
            
            updateInterval = setInterval(() => {
                updateSession();
            }, 2000); // Update every 2 seconds
        }

        // Stop monitoring
        function stopMonitoring() {
            if (updateInterval) {
                clearInterval(updateInterval);
                updateInterval = null;
            }
        }

        // Update session data
        function updateSession() {
            if (!chargingSession) return;
            
            // Calculate consumption increase
            const consumptionIncrease = Math.random() * 0.3; // 0-0.3 kWh
            chargingSession.kwhUsed += consumptionIncrease;
            chargingSession.totalCost = chargingSession.kwhUsed * chargingSession.provider.price;
            
            // Update UI
            const activeKwh = document.getElementById('active-kwh');
            const activeCost = document.getElementById('active-cost');
            const activeRate = document.getElementById('active-rate');
            const elapsedTime = document.getElementById('elapsed-time');
            
            if (activeKwh) activeKwh.textContent = chargingSession.kwhUsed.toFixed(2);
            if (activeCost) activeCost.textContent = chargingSession.totalCost.toFixed(4);
            if (activeRate) activeRate.textContent = chargingSession.provider.price;
            if (elapsedTime) {
                const elapsed = Math.floor((Date.now() - chargingSession.startTime) / 1000);
                elapsedTime.textContent = `${elapsed} seconds`;
            }
            
            // Simulate blockchain update every 15 seconds
            if (Math.floor((Date.now() - chargingSession.startTime) / 1000) % 15 === 0) {
                addBlockchainEvent('Consumption Update', `${chargingSession.kwhUsed.toFixed(2)} kWh consumed`, 'info');
            }
        }

        // Stop charging session
        function stopChargingSession() {
            if (!chargingSession) return;
            
            // Add final blockchain event
            addBlockchainEvent('Session Stopped', `Session #${chargingSession.id} - Final: ${chargingSession.kwhUsed.toFixed(2)} kWh`, 'success');
            
            // Update charger data
            chargerData.totalKwhConsumed += chargingSession.kwhUsed;
            chargerData.totalRevenue += chargingSession.totalCost;
            chargerData.balance -= Math.floor(chargingSession.totalCost * 1000000000000000000); // Convert to aettos
            
            // Update UI
            updateChargerData();
            
            showToast('Charging session stopped successfully', 'success');
            
            chargingSession = null;
            stopMonitoring();
            hideActiveSession();
        }

        // Update charger data display
        function updateChargerData() {
            const chargerBalance = document.getElementById('charger-balance');
            const totalKwhConsumed = document.getElementById('total-kwh-consumed');
            const totalRevenue = document.getElementById('total-revenue');
            
            if (chargerBalance) chargerBalance.textContent = `${chargerData.balance} aettos`;
            if (totalKwhConsumed) totalKwhConsumed.textContent = `${chargerData.totalKwhConsumed.toFixed(2)} kWh`;
            if (totalRevenue) totalRevenue.textContent = `${chargerData.totalRevenue.toFixed(2)} AE`;
        }

        // Add blockchain event
        function addBlockchainEvent(title, txHash, type) {
            const container = document.getElementById('blockchain-events');
            if (!container) return;
            
            // Remove "no transactions" message if present
            const noTxMsg = container.querySelector('.text-gray-500');
            if (noTxMsg) noTxMsg.remove();
            
            const colors = {
                success: 'bg-green-50 border-green-200 text-green-800',
                payment: 'bg-purple-50 border-purple-200 text-purple-800',
                info: 'bg-blue-50 border-blue-200 text-blue-800',
                warning: 'bg-yellow-50 border-yellow-200 text-yellow-800'
            };
            
            const event = document.createElement('div');
            event.className = `${colors[type] || colors.info} border rounded-lg p-3 text-sm mb-2`;
            event.innerHTML = `
                <p class="font-bold">${title}</p>
                <p class="text-xs break-all">${txHash}</p>
                <p class="text-xs mt-1">${new Date().toLocaleTimeString()}</p>
            `;
            
            container.insertBefore(event, container.firstChild);
            
            // Keep only last 10 events
            while (container.children.length > 10) {
                container.removeChild(container.lastChild);
            }
        }

        // Fund charger
        function fundCharger() {
            chargerData.balance += 1000;
            updateChargerData();
            addBlockchainEvent('Charger Funded', 'Added 1000 aettos to charger balance', 'payment');
            showToast('Charger funded successfully', 'success');
        }

        // Show toast notification
        function showToast(message, type = 'info') {
            // Create toast element
            const toast = document.createElement('div');
            toast.className = `toast toast-${type} fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm`;
            
            const colors = {
                success: 'bg-green-500 text-white',
                error: 'bg-red-500 text-white',
                warning: 'bg-yellow-500 text-white',
                info: 'bg-blue-500 text-white'
            };
            
            toast.className += ` ${colors[type] || colors.info}`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            // Remove toast after 3 seconds
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 3000);
        }

        // Initialize charger data when page loads
        document.addEventListener('DOMContentLoaded', () => {
            // Update charger data display
            updateChargerData();
            
            // Add some initial blockchain events
            setTimeout(() => {
                addBlockchainEvent('Charger Online', 'EV Charger connected to network', 'info');
                addBlockchainEvent('Providers Loaded', '3 electricity providers available', 'info');
            }, 1000);
        });

        // Show EV Charger management for EV Charger devices
        function showEVChargerManagement() {
            const evChargerManagement = document.getElementById('ev-charger-management');
            if (evChargerManagement) {
                evChargerManagement.style.display = 'block';
                updateChargerData();
                
                // Add some initial blockchain events
                setTimeout(() => {
                    addBlockchainEvent('Charger Online', 'EV Charger connected to network', 'info');
                    addBlockchainEvent('Providers Loaded', '3 electricity providers available', 'info');
                }, 1000);
            }
        }

        // Hide EV Charger management
        function hideEVChargerManagement() {
            const evChargerManagement = document.getElementById('ev-charger-management');
            if (evChargerManagement) {
                evChargerManagement.style.display = 'none';
            }
        }

        // Make functions globally available
        window.startChargingSession = startChargingSession;
        window.stopChargingSession = stopChargingSession;
        window.fundCharger = fundCharger;
        window.showEVChargerManagement = showEVChargerManagement;
        window.hideEVChargerManagement = hideEVChargerManagement;
    </script>
</body>
</html>
